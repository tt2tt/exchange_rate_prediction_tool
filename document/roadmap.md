# 為替予想ツール ロードマップ

## フェーズ0: 初期セットアップ
- [〇] README.mdを作成してプロジェクト概要・利用方法を整理
- [〇] クラス設計を作成し、`document/architecture/class_design.puml`で管理
- [〇] 想定ユーザーフローのフローチャートを`document/architecture/user_flow.puml`で管理
- [〇] 開発環境を構築し、仮想環境`venv`と依存関係を整備
- [〇] CI/CDパイプラインを追加し、`develop`ブランチでテスト・型チェック・デプロイ、`main`ブランチでテスト・型チェック・デプロイ・リリースを自動化
- [〇] ログ出力基盤を整備し、日次ローテーションと30日保持を実装
- [〇] `document/progress.txt`に進捗記録フォーマットを準備

## フェーズ1: データハンドリングと前処理
- [〇] 必須カラム検証・欠損値/無限値処理を実装
- [〇] Date昇順ソート・ラグ適用の前処理パイプラインを実装
- [〇] 特徴量生成（リターン、乖離率、傾き、クロス、ボラティリティ）モジュールを作成

## フェーズ2: モデル学習と評価
- [〇] ロジスティック回帰モデル学習フローを構築
- [〇] TimeSeriesSplitによる検証と評価指標（Accuracy, Precision, Recall, ROC-AUC, 期待値計算）を実装
- [〇] 予測結果（上昇確率・判定）出力処理を実装
- [〇] バックテストモジュール（スプレッド適用、勝率・PF・最大DD・総リターン算出）を実装
- [〇] 学習済みモデル保存処理（`models/latest_model.joblib`）とログ出力（`logs/run_yyyymmdd_HHMM.txt`）を実装
- [〇] バックテスト結果CSV出力（エントリー/エグジット/損益）を実装

## フェーズ3: PySide6 UI構築
- [〇] UIモックを作成し、ファイル選択・数値入力・実行ボタンを配置
- [ ] 入力値検証とエラー表示（カラム不足、行数不足、範囲外値）を連携
- [ ] 実行フロー連携：前処理→特徴量→学習→評価→バックテスト→出力
- [ ] 進捗バー・ログ表示・結果セクション（予測、検証、バックテスト）を実装
- [ ] （任意）終値・MAとシグナルのミニチャート描画を実装

## フェーズ4: 配布と運用
- [ ] Windows向けPySide6アプリのexeビルド手順を整備
- [ ] Web版展開を検討し、初期画面表示時のデプロイ＆自動デプロイ設定を検証（必要なら）
- [ ] 運用ドキュメント整備（ログ保守、モデル更新手順、バックテスト使用方法）

### テスト・品質保証
- [ ] CIで実行するテスト・型チェックスイートを構築
- [ ] ユニットテスト・統合テスト・UIテスト（必要に応じて）を整備
- [ ] バックテスト結果の検証ケースを作成

## リスクと検討事項
- [ ] 特徴量・モデル拡張（RandomForest/LightGBM等）の検討
- [ ] しきい値チューニングとスプレッド設定の感度分析
- [ ] 長期間データ対応（パフォーマンス・メモリ）
